---

# Specific vars for Debian family
#------------------------------------------------------------------------------

# Package management
_postgresql_gpg_keys:
  - url: "https://www.postgresql.org/media/keys/ACCC4CF8.asc"
_postgresql_package_repositories:
  - repo: "deb http://apt.postgresql.org/pub/repos/apt/ {{ ansible_distribution_release | lower }}-pgdg main"
_postgresql_system_prerequisites:
  - name: 'ca-certificates'
  - name: 'locales'
  - name: 'python-psycopg2'
_postgresql_packages:
  - name: "postgresql-{{ postgresql_version }}"
  - name: "postgresql-common"
  - name: "postgresql-client-{{ postgresql_version }}"
  - name: "postgresql-client-common"
  - name: "postgresql-contrib-{{ postgresql_version }}"

# Users and groups management
_postgresql_users:
  - name: 'postgres'
    group: 'postgres'
    home: '/var/lib/postgresql'
    shell: '/bin/bash'
_postgresql_groups:
  - name: 'postgres'

# Service management
_postgresql_services:
  - name: 'postgresql'

# Paths
_postgresql_paths:
  config_files:
    environment:
      path: "/etc/postgresql/{{ postgresql_version }}/main/environment"
      owner: "{{ postgresql_users[0].name }}"
      group: "{{ postgresql_groups[0].name }}"
      mode: '0644'
    main:
      path: "/etc/postgresql/{{ postgresql_version }}/main/postgresql.conf"
      owner: "{{ postgresql_users[0].name }}"
      group: "{{ postgresql_groups[0].name }}"
      mode: '0644'
    pg_ctl:
      path: "/etc/postgresql/{{ postgresql_version }}/main/pg_ctl.conf"
      owner: "{{ postgresql_users[0].name }}"
      group: "{{ postgresql_groups[0].name }}"
      mode: '0644'
    start:
      path: "/etc/postgresql/{{ postgresql_version }}/main/start.conf"
      owner: "{{ postgresql_users[0].name }}"
      group: "{{ postgresql_groups[0].name }}"
      mode: '0644'
